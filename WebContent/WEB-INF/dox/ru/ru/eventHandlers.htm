<!--
    Mango - Open Source M2M - http://mango.serotoninsoftware.com
    Copyright (C) 2006-2011 Serotonin Software Technologies Inc.
    @author Matthew Lohbihler
    
    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see http://www.gnu.org/licenses/.
 -->

<h1>Обзор</h1>
<p>Обработчики событий выполняют заданные пользователем действия при возникновении определенных событий. События могут возникать вследствие различных системных условий (более подробная информация приводится в разделе «События» страницы общей справки). При возникновении события запускается связанный с ним обработчик события.</p>
<p>В настоящее время существует три типа обработчиков событий: </p>
<ul>
  <li><strong>Обработчики электронных сообщений</strong>: направить электронное сообщение получателям из списка</li>
  <li><strong>Обработчики устанавливаемой точки</strong>: вызвать настраиваемый объект, чтобы установить значение</li>
  <li><strong>Обработчики процессов</strong>: вызвать для выполнения заданный процесс операционной системы</li>
</ul>

<h1>Типы событий</h1>
<p>
В разделе Типы событий все имеющиеся в системе типы события организованы в виде дерева. Ветка детекторов событий содержит список всех объектов (обозначены значком <img src="images/icon_comp.png"/>) в системе, которые имеют связанные детекторы. Детекторы событий приводятся в соответствующих ветках объектов. </p>
<p>Типы событий для запланированных событий, составных детекторов событий и системных событий приводятся в соответствующих ветках. Ветка событий источников данных содержит список всех источников данных, которые могут генерировать событие. События также перечислены в соответствующей ветке источника данных.</p>
<p>Чтобы добавить новый обработчик событий, выберите курсором тип события, для которого вы хотите назначить обработчик. На экране появится окно с параметрами обработчика. Текущий обработчик событий не будет сохранен, пока вы не нажмете пиктограмму <img src="images/save_add.png"/>. Чтобы редактировать существующий обработчик, нажмите на имя обработчика в списке обработчиков нужной ветки типов событий. Если вы добавляете новый обработчик, вы должны выбрать Тип обработчика. </p>
<p>Как только вы сохраните обработчик, его тип уже нельзя будет изменить.</p>

<h1>Псевдоним события</h1>
<p>Обработчику событий можно присвоить произвольный псевдоним, который будет использоваться для его идентификации. Этот псевдоним можно также использовать для заполнения поля Тема в обработчиках событий электронных сообщений.</p>

<h1>Редактирование существующих обработчиков</h1>
<p>Чтобы сохранить изменения, произведенные в выражении обработчика, нажмите пиктограмму <img src="images/save.png"/> в верхнем правом углу окна Обработчика событий. Чтобы удалить обработчик, нажмите пиктограмму <img src="images/delete.png"/>. </p>
<h1>Редактирование обработчиков электронных сообщений</h1>
<p>Обработчики электронных сообщений поддерживают до трех списков получателей. Первый список – это список получателей, которым направляется сообщение о возникновении события. Второй список – список получателей, которым направляются сообщения об эскалации. Это необязательный список. Третий список – получателей, которым направляется сообщение о прекращении события. Он тоже необязательный.</p>
<p>
Чтобы добавить список рассылки в список получателей, выберите из выпадающего списка пункт Добавить список рассылки и нажмите пиктограмму <img src="images/add.png"/> рядом с выпадающим списком. Чтобы добавить пользователя, выберите пункт Добавить пользователя и нажмите пиктограмму <img src="images/add.png"/> рядом с выпадающим списком. Чтобы добавить электронный адрес в произвольной форме, введите адрес в окне Добавить адрес и нажмите пиктограмму <img src="images/add.png"/> рядом с ним. Чтобы удалить получателя из списка, нажмите пиктограмму <img src="images/bullet_delete.png"/> рядом с получателем. Чтобы проверить список получателей, нажмите пиктограмму <img src="images/email_go.png"/> нужного списка.</p>
<p>&nbsp;</p>
<p>
  Чтобы установить отправку электронных сообщений об эскалации, отметьте флажком окно Отправлять сообщение об эскалации и введите Получателей сообщений об эскалации. Электронное сообщение об эскалации события будет отправлено только в том случае, если событие остается активным в течение периода, заданного в поле <strong>Определить эскалацию , если событие активно более чем ... </strong> </p>
<p>Уведомление о прекращении события будет отправляться, если окно Отправить уведомление о прекращении события отмечено флажком. В этом случае уведомление будет отправляться всем получателям сразу же по прекращении события. Обратите внимание, что если сообщение об эскалации не отправлялось, то уведомление о прекращении события также не будет рассылаться получателям из списка рассылки сообщений об эскалации. Уведомление о прекращении события получат только те адресаты, которые получали сообщение о возникновении события. Если Вам нужна другая схема рассылки, вы можете отметить флажком окно Заменить получателей сообщений о прекращении события. В этом случае, вы сможете настроить список получателей сообщений о прекращении события. Это может быть полезно, если не всем получателям сообщений о возникновении событий нужно отправлять дальнейшие уведомления (например, в тикет-системе).</p>

<h1>Редактирование обработчиков контрольного объекта</h1>
<p>При возникновении события данный обработчик будет устанавливать значение заданного настраиваемого объекта. Адресат – это настраиваемый объект, значение которого будет установлено. По желанию объекту может быть присвоено значение, которое привело к возникновению события, но это возможно только в том случае, если событие вызвано детектором события, срабатывающим при изменении значения. При этом тип данных адресата должен совпадать с типом данных источника данных. Чтобы задать в поле Адресата значение источника, необходимо поставить флажок в окне Использовать значение источника. В остальных случаях задайте значение, которое должен иметь адресат, в области Задать значение.</p>

<h1>Редактирование обработчиков процессов</h1>
<p>Данный обработчик будет выполнять локальный процесс или команду операционной системы (по выбору) при возникновении или прекращении события. Соответственно такой командой может быть любая команда операционной системы, обращенная хосту. Команды должны указываться в таком же виде, как команды, вводимые с терминала. Для особо сложных команд, возможно, будет более удобно создать системный сценарий, а затем вызвать его из ScadaBR. </p>
<p>  Если процесс по каким-либо причинам не запускается, будет вызвано системное событие с описанием ошибки. Кроме того процесс будет остановлен, если он продолжается более 15 секунд. Не пустой стандартный выход процесса записывается в журнал ScadaBR с уровнем «информация». Не пустой ошибочный выход записывается в журнал ScadaBR с уровнем «ошибки». </p>
